\begin{Verbatim}[commandchars=\\\{\}]
            \PYGdefault{k}{if} \PYGdefault{p}{(}\PYGdefault{n}{dims}\PYGdefault{p}{[}\PYGdefault{l+m+mi}{0}\PYGdefault{p}{]} \PYGdefault{o}{!=} \PYGdefault{n}{dims}\PYGdefault{p}{[}\PYGdefault{l+m+mi}{1}\PYGdefault{p}{])} \PYGdefault{p}{\PYGdefaultZob{}}
                \PYGdefault{n}{printf}\PYGdefault{p}{(}\PYGdefault{l+s}{\PYGdefaultZdq{}}\PYGdefault{l+s+se}{\PYGdefaultZbs{}n}\PYGdefault{l+s}{Process mesh is not appropriate. Aborting.}\PYGdefault{l+s+se}{\PYGdefaultZbs{}n\PYGdefaultZbs{}n}\PYGdefault{l+s}{\PYGdefaultZdq{}}\PYGdefault{p}{);}
                \PYGdefault{n}{exit}\PYGdefault{p}{(}\PYGdefault{n}{EXIT\PYGdefaultZus{}FAILURE}\PYGdefault{p}{);}
            \PYGdefault{p}{\PYGdefaultZcb{}}

            \PYGdefault{n}{max} \PYGdefault{o}{=} \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{m}\PYGdefault{p}{;}
            \PYGdefault{p}{(}\PYGdefault{n}{max} \PYGdefault{o}{\PYGdefaultZlt{}} \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{k}\PYGdefault{p}{)} \PYGdefault{o}{\PYGdefaultZam{}\PYGdefaultZam{}} \PYGdefault{p}{(}\PYGdefault{n}{max} \PYGdefault{o}{=} \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{k}\PYGdefault{p}{);}
            \PYGdefault{p}{(}\PYGdefault{n}{max} \PYGdefault{o}{\PYGdefaultZlt{}} \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{n}\PYGdefault{p}{)} \PYGdefault{o}{\PYGdefaultZam{}\PYGdefaultZam{}} \PYGdefault{p}{(}\PYGdefault{n}{max} \PYGdefault{o}{=} \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{n}\PYGdefault{p}{);}

            \PYGdefault{k+kt}{int} \PYGdefault{n}{sz} \PYGdefault{o}{=} \PYGdefault{n}{max}\PYGdefault{o}{/}\PYGdefault{n}{dims}\PYGdefault{p}{[}\PYGdefault{l+m+mi}{0}\PYGdefault{p}{];}  \PYGdefault{c+c1}{// row length per block}

            \PYGdefault{k}{if}\PYGdefault{p}{(}\PYGdefault{n}{max} \PYGdefault{o}{\PYGdefaultZgt{}} \PYGdefault{n}{sz} \PYGdefault{o}{*} \PYGdefault{n}{dims}\PYGdefault{p}{[}\PYGdefault{l+m+mi}{0}\PYGdefault{p}{])} \PYGdefault{p}{\PYGdefaultZob{}}
                \PYGdefault{n}{sz} \PYGdefault{o}{+=} \PYGdefault{l+m+mi}{1}\PYGdefault{p}{;}
                \PYGdefault{n}{max} \PYGdefault{o}{=} \PYGdefault{n}{sz} \PYGdefault{o}{*} \PYGdefault{n}{dims}\PYGdefault{p}{[}\PYGdefault{l+m+mi}{0}\PYGdefault{p}{];}
            \PYGdefault{p}{\PYGdefaultZcb{}}

            \PYGdefault{k+kt}{int} \PYGdefault{n}{blockSz} \PYGdefault{o}{=} \PYGdefault{n}{sz} \PYGdefault{o}{*} \PYGdefault{n}{sz}\PYGdefault{p}{;}

            \PYGdefault{n}{MPI\PYGdefaultZus{}Type\PYGdefaultZus{}contiguous}\PYGdefault{p}{(}\PYGdefault{n}{blockSz}\PYGdefault{p}{,} \PYGdefault{n}{MPI\PYGdefaultZus{}DOUBLE}\PYGdefault{p}{,} \PYGdefault{o}{\PYGdefaultZam{}}\PYGdefault{n}{MPI\PYGdefaultZus{}SUBMATRIX}\PYGdefault{p}{);}
            \PYGdefault{n}{MPI\PYGdefaultZus{}Type\PYGdefaultZus{}commit}\PYGdefault{p}{(}\PYGdefault{o}{\PYGdefaultZam{}}\PYGdefault{n}{MPI\PYGdefaultZus{}SUBMATRIX}\PYGdefault{p}{);}



                \PYGdefault{k+kt}{bool} \PYGdefault{n}{resize} \PYGdefault{o}{=} \PYGdefault{n+nb}{true}\PYGdefault{p}{;}
                \PYGdefault{k}{if}\PYGdefault{p}{(}\PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{m} \PYGdefault{o}{==} \PYGdefault{n}{max} \PYGdefault{o}{\PYGdefaultZam{}\PYGdefaultZam{}}
                    \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{n} \PYGdefault{o}{==} \PYGdefault{n}{max} \PYGdefault{o}{\PYGdefaultZam{}\PYGdefaultZam{}}
                    \PYGdefault{n}{arguments}\PYGdefault{p}{.}\PYGdefault{n}{k} \PYGdefault{o}{==} \PYGdefault{n}{max}\PYGdefault{p}{)} \PYGdefault{p}{\PYGdefaultZob{}}
                    \PYGdefault{n}{resize} \PYGdefault{o}{=} \PYGdefault{n+nb}{false}\PYGdefault{p}{;}
                \PYGdefault{p}{\PYGdefaultZcb{}}
\end{Verbatim}
